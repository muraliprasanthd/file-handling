<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Files</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/fileStyle.css">
</head>
<body>
<div class="container">
    <header class="my-4">
        <h1 class="text-center">Files</h1>
    </header>
    <main>
        <div id="loading" class="loading" aria-label="Loading">Loading...</div>
        <div id="files-container" class="tree" aria-label="Files Container">
            <!-- Files will be dynamically inserted here -->
        </div>
    </main>
</div>
<script>
    document.getElementById('loading').style.display = 'block';

    // Fetch files from the server and display them
    fetch('/filelist')
        .then(response => response.json())
        .then(files => {
            const container = document.getElementById('files-container');
            const fileTree = buildFileTree(files);
            container.appendChild(fileTree);
            document.getElementById('loading').style.display = 'none';
        })
        .catch(error => {
            console.error('Error fetching files:', error);
            document.getElementById('loading').style.display = 'none';
        });

    function buildFileTree(files) {
        const ul = document.createElement('ul');
        files.forEach(file => {
            const li = document.createElement('li');
            li.innerHTML = `<a href="#">${file.fileName}</a>`;
            ul.appendChild(li);
        });
        return ul;
    }
</script>
</body>
</html>